# JI STAMP - 用印申請管理系統

## 模組簡介

JI STAMP 是一個專為企業設計的用印申請管理系統，整合 EFGP 簽核流程，提供完整的印章使用申請與審核功能。

## 主要功能

### 1. 用印申請單管理
- **五個主要欄位**：
  - 文件類型（合約書、發票、收據、證明書、其他）
  - 文件名稱
  - 文件份數
  - 用印類型（公司章、法定代理人章、部門章、專用章、其他印章）
  - 急件等級（一般、急件、特急）

### 2. EFGP 簽核整合
- 自動送簽到 EFGP 系統
- 狀態同步與追蹤
- 支援多層簽核流程

### 3. 流程管理
- 草稿 → 已送簽 → 已核准 → 已完成
- 支援駁回與取消功能
- 急件優先處理

### 4. 權限管理
- 申請人：建立與管理自己的申請單
- 簽核人員：審核申請單
- 管理員：完整權限與系統設定

## 安裝與設定

### 1. 安裝模組
```bash
# 將 JI_STAMP 模組複製到 Odoo 模組目錄
# 在 Odoo 中安裝模組
```

### 2. 基本設定
1. 進入「JI STAMP」→「設定」→「用印申請設定」
2. 設定 EFGP 整合參數（如需要）
3. 配置簽核人員
4. 設定通知選項

### 3. EFGP 整合設定
- 啟用 EFGP 整合
- 設定 EFGP API 網址
- 設定 API 金鑰
- 測試連線

## 使用說明

### 建立用印申請單
1. 進入「用印申請」→「申請單管理」
2. 點擊「建立」按鈕
3. 填寫五個主要欄位：
   - 選擇文件類型
   - 輸入文件名稱
   - 設定文件份數
   - 選擇用印類型
   - 選擇急件等級
4. 上傳相關附件
5. 填寫申請說明
6. 點擊「送簽」

### 簽核流程
1. 簽核人員在「待我簽核」中查看申請單
2. 點擊申請單進行審核
3. 選擇「核准」或「駁回」
4. 填寫簽核備註（可選）

### 狀態追蹤
- **草稿**：申請單建立但未送簽
- **已送簽**：已送到 EFGP 等待簽核
- **已核准**：簽核完成，可進行用印
- **已完成**：用印完成
- **已駁回**：申請被駁回
- **已取消**：申請被取消

## 技術架構

### 模型結構
- `stamp.application`：用印申請單
- `stamp.config`：系統設定
- `efgp.service`：EFGP 整合服務

### 主要功能
- 自動序號產生
- 狀態管理與追蹤
- 權限控制
- 通知系統
- EFGP API 整合

### 視圖類型
- 表單視圖：詳細編輯
- 列表視圖：資料瀏覽
- 看板視圖：流程管理
- 搜尋視圖：篩選與分組

## 開發資訊

### 版本
- Odoo 17.0
- Python 3.10+

### 依賴模組
- base
- mail
- hr
- web

### 開發團隊
- **作者**：JI TWINS STUDIO
- **支援**：studio.jitwins@gmail.com
- **網站**：https://ji-twins-studio.odoo.com/

## 更新日誌

### v17.0.1.0
- 初始版本發布
- 基本用印申請功能
- EFGP 整合
- 權限管理
- 通知系統

## 授權

本模組採用專有授權，版權歸 JI TWINS STUDIO 所有。 

## EFGP WebService 介接方法

本模組與 EFGP 簽核系統整合，主要用到以下 WebService 方法：

| 方法名稱                                 | 用途                     | 主要出現位置                |
|------------------------------------------|--------------------------|-----------------------------|
| fetchFullProcInstanceWithSerialNo        | 查詢完整簽核歷程         | action_update_history       |
| fetchProcInstanceWithSerialNo            | 查詢流程狀態             | action_fetch_efgp_status    |
| invokeProcessAndAddCustAct               | 送出申請單啟動流程       | action_submit               |
| findFormOIDsOfProcess                    | 查詢流程表單 OID         | action_submit               |
| getFormFieldTemplate                     | 查詢表單欄位結構         | action_submit               |

- 這些方法皆透過 zeep 套件呼叫 EFGP WebService。
- 詳細參數與回傳格式請參考 EFGP 官方文件或本模組的 `stamp_application.py`。 